import{S as x,i as ee,s as te,k as b,q as B,a as N,l as w,m as g,r as z,h as u,c as R,n as d,b as A,G as _,H as $,O as ye,P as we,K as ne,Q as Ie,M as Me,o as Oe,u as ke,R as $e,w as st,g as y,v as fe,d as V,f as he,y as K,z as Q,p as Ee,A as X,B as Y,T as ie,U as ue,V as rt,N as nt}from"../chunks/index.43fd0a54.js";import{d as Te,a as Ze,s as ot,g as ct}from"../chunks/navigation.e2520b57.js";function at({params:r}){return{roomId:r.roomId}}const Qt=Object.freeze(Object.defineProperty({__proto__:null,load:at},Symbol.toStringTag,{value:"Module"}));function it(r){let e,t,l,n,s,c;return{c(){e=b("section"),t=b("a"),l=B("Home"),n=N(),s=b("h1"),c=B("Go home page and join correctly"),this.h()},l(a){e=w(a,"SECTION",{});var o=g(e);t=w(o,"A",{href:!0});var h=g(t);l=z(h,"Home"),h.forEach(u),n=R(o),s=w(o,"H1",{});var i=g(s);c=z(i,"Go home page and join correctly"),i.forEach(u),o.forEach(u),this.h()},h(){d(t,"href","/")},m(a,o){A(a,e,o),_(e,t),_(t,l),_(e,n),_(e,s),_(s,c)},p:$,i:$,o:$,d(a){a&&u(e)}}}class ut extends x{constructor(e){super(),ee(this,e,null,it,te,{})}}function ft(r){let e,t,l,n,s,c;return{c(){e=b("section"),t=b("a"),l=B("Home"),n=N(),s=b("h1"),c=B("The room not exist"),this.h()},l(a){e=w(a,"SECTION",{});var o=g(e);t=w(o,"A",{href:!0});var h=g(t);l=z(h,"Home"),h.forEach(u),n=R(o),s=w(o,"H1",{});var i=g(s);c=z(i,"The room not exist"),i.forEach(u),o.forEach(u),this.h()},h(){d(t,"href","/")},m(a,o){A(a,e,o),_(e,t),_(t,l),_(e,n),_(e,s),_(s,c)},p:$,i:$,o:$,d(a){a&&u(e)}}}class ht extends x{constructor(e){super(),ee(this,e,null,ft,te,{})}}function Pe(r,e,t){const l=r.slice();return l[10]=e[t],l}function Le(r,e,t){const l=r.slice();return l[10]=e[t],l}function Fe(r,e,t){const l=r.slice();return l[10]=e[t],l}function Je(r){let e,t=r[10].label+"",l,n;return{c(){e=b("option"),l=B(t),this.h()},l(s){e=w(s,"OPTION",{});var c=g(e);l=z(c,t),c.forEach(u),this.h()},h(){e.__value=n=r[10].deviceId,e.value=e.__value},m(s,c){A(s,e,c),_(e,l)},p(s,c){c&1&&t!==(t=s[10].label+"")&&ke(l,t),c&1&&n!==(n=s[10].deviceId)&&(e.__value=n,e.value=e.__value)},d(s){s&&u(e)}}}function qe(r){let e,t=r[10].label+"",l,n;return{c(){e=b("option"),l=B(t),this.h()},l(s){e=w(s,"OPTION",{});var c=g(e);l=z(c,t),c.forEach(u),this.h()},h(){e.__value=n=r[10].deviceId,e.value=e.__value},m(s,c){A(s,e,c),_(e,l)},p(s,c){c&2&&t!==(t=s[10].label+"")&&ke(l,t),c&2&&n!==(n=s[10].deviceId)&&(e.__value=n,e.value=e.__value)},d(s){s&&u(e)}}}function We(r){let e,t=r[10].label+"",l,n;return{c(){e=b("option"),l=B(t),this.h()},l(s){e=w(s,"OPTION",{});var c=g(e);l=z(c,t),c.forEach(u),this.h()},h(){e.__value=n=r[10].deviceId,e.value=e.__value},m(s,c){A(s,e,c),_(e,l)},p(s,c){c&4&&t!==(t=s[10].label+"")&&ke(l,t),c&4&&n!==(n=s[10].deviceId)&&(e.__value=n,e.value=e.__value)},d(s){s&&u(e)}}}function dt(r){let e,t,l,n,s,c,a,o,h,i,m,f,S,M,le,j,C,H,q,O,ce,oe,W,J,D,p,I,k,T,U,de,ae,se,De,Ce,Ve,_e=r[0],Z=[];for(let E=0;E<_e.length;E+=1)Z[E]=Je(Fe(r,_e,E));let me=r[1],P=[];for(let E=0;E<me.length;E+=1)P[E]=qe(Le(r,me,E));let ve=r[2],L=[];for(let E=0;E<ve.length;E+=1)L[E]=We(Pe(r,ve,E));return{c(){e=b("div"),t=b("div"),l=b("div"),n=N(),s=b("div"),c=N(),a=b("div"),o=b("div"),h=b("label"),i=B("Microphone:"),m=N(),f=b("select");for(let E=0;E<Z.length;E+=1)Z[E].c();S=N(),M=b("div"),le=N(),j=b("div"),C=b("label"),H=B("Webcam:"),q=N(),O=b("select");for(let E=0;E<P.length;E+=1)P[E].c();ce=N(),oe=b("div"),W=N(),J=b("div"),D=b("label"),p=B("Speakers"),I=N(),k=b("select");for(let E=0;E<L.length;E+=1)L[E].c();T=N(),U=b("div"),de=N(),ae=b("div"),se=b("button"),De=B("Join"),this.h()},l(E){e=w(E,"DIV",{class:!0});var G=g(e);t=w(G,"DIV",{class:!0});var v=g(t);l=w(v,"DIV",{class:!0}),g(l).forEach(u),n=R(v),s=w(v,"DIV",{class:!0}),g(s).forEach(u),c=R(v),a=w(v,"DIV",{class:!0});var F=g(a);o=w(F,"DIV",{class:!0});var ge=g(o);h=w(ge,"LABEL",{for:!0});var Ae=g(h);i=z(Ae,"Microphone:"),Ae.forEach(u),m=R(ge),f=w(ge,"SELECT",{name:!0,id:!0,class:!0});var Ne=g(f);for(let re=0;re<Z.length;re+=1)Z[re].l(Ne);Ne.forEach(u),S=R(ge),M=w(ge,"DIV",{class:!0}),g(M).forEach(u),ge.forEach(u),le=R(F),j=w(F,"DIV",{class:!0});var pe=g(j);C=w(pe,"LABEL",{for:!0});var Re=g(C);H=z(Re,"Webcam:"),Re.forEach(u),q=R(pe),O=w(pe,"SELECT",{name:!0,id:!0,class:!0});var Ue=g(O);for(let re=0;re<P.length;re+=1)P[re].l(Ue);Ue.forEach(u),ce=R(pe),oe=w(pe,"DIV",{class:!0}),g(oe).forEach(u),pe.forEach(u),W=R(F),J=w(F,"DIV",{class:!0});var be=g(J);D=w(be,"LABEL",{for:!0});var je=g(D);p=z(je,"Speakers"),je.forEach(u),I=R(be),k=w(be,"SELECT",{name:!0,id:!0,class:!0});var Be=g(k);for(let re=0;re<L.length;re+=1)L[re].l(Be);Be.forEach(u),T=R(be),U=w(be,"DIV",{class:!0}),g(U).forEach(u),be.forEach(u),de=R(F),ae=w(F,"DIV",{class:!0});var ze=g(ae);se=w(ze,"BUTTON",{class:!0});var He=g(se);De=z(He,"Join"),He.forEach(u),ze.forEach(u),F.forEach(u),v.forEach(u),G.forEach(u),this.h()},h(){d(l,"class","circle svelte-irtccy"),d(s,"class","circle svelte-irtccy"),d(h,"for","Microphones"),d(f,"name","Microphones"),d(f,"id","Microphones"),d(f,"class","svelte-irtccy"),r[3]===void 0&&ye(()=>r[7].call(f)),d(M,"class","select_arrow svelte-irtccy"),d(o,"class","set svelte-irtccy"),d(C,"for","Webcams"),d(O,"name","Webcams"),d(O,"id","Webcams"),d(O,"class","svelte-irtccy"),r[4]===void 0&&ye(()=>r[8].call(O)),d(oe,"class","select_arrow svelte-irtccy"),d(j,"class","set svelte-irtccy"),d(D,"for","Speakers"),d(k,"name","Speakers"),d(k,"id","Speakers"),d(k,"class","svelte-irtccy"),r[5]===void 0&&ye(()=>r[9].call(k)),d(U,"class","select_arrow svelte-irtccy"),d(J,"class","set svelte-irtccy"),d(se,"class","svelte-irtccy"),d(ae,"class","buttons svelte-irtccy"),d(a,"class","card-inner svelte-irtccy"),d(t,"class","card svelte-irtccy"),d(e,"class","settings-card svelte-irtccy")},m(E,G){A(E,e,G),_(e,t),_(t,l),_(t,n),_(t,s),_(t,c),_(t,a),_(a,o),_(o,h),_(h,i),_(o,m),_(o,f);for(let v=0;v<Z.length;v+=1)Z[v]&&Z[v].m(f,null);we(f,r[3],!0),_(o,S),_(o,M),_(a,le),_(a,j),_(j,C),_(C,H),_(j,q),_(j,O);for(let v=0;v<P.length;v+=1)P[v]&&P[v].m(O,null);we(O,r[4],!0),_(j,ce),_(j,oe),_(a,W),_(a,J),_(J,D),_(D,p),_(J,I),_(J,k);for(let v=0;v<L.length;v+=1)L[v]&&L[v].m(k,null);we(k,r[5],!0),_(J,T),_(J,U),_(a,de),_(a,ae),_(ae,se),_(se,De),Ce||(Ve=[ne(f,"change",r[7]),ne(O,"change",r[8]),ne(k,"change",r[9]),ne(se,"click",r[6])],Ce=!0)},p(E,[G]){if(G&1){_e=E[0];let v;for(v=0;v<_e.length;v+=1){const F=Fe(E,_e,v);Z[v]?Z[v].p(F,G):(Z[v]=Je(F),Z[v].c(),Z[v].m(f,null))}for(;v<Z.length;v+=1)Z[v].d(1);Z.length=_e.length}if(G&9&&we(f,E[3]),G&2){me=E[1];let v;for(v=0;v<me.length;v+=1){const F=Le(E,me,v);P[v]?P[v].p(F,G):(P[v]=qe(F),P[v].c(),P[v].m(O,null))}for(;v<P.length;v+=1)P[v].d(1);P.length=me.length}if(G&18&&we(O,E[4]),G&4){ve=E[2];let v;for(v=0;v<ve.length;v+=1){const F=Pe(E,ve,v);L[v]?L[v].p(F,G):(L[v]=We(F),L[v].c(),L[v].m(k,null))}for(;v<L.length;v+=1)L[v].d(1);L.length=ve.length}G&36&&we(k,E[5])},i:$,o:$,d(E){E&&u(e),Ie(Z,E),Ie(P,E),Ie(L,E),Ce=!1,Me(Ve)}}}function _t(r,e,t){let l=[],n=[],s=[],c,a,o;Oe(async()=>{try{if(navigator.mediaDevices.getUserMedia)try{await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});const S=await navigator.mediaDevices.enumerateDevices();return t(0,l=S.filter(M=>M.kind==="audioinput")),t(1,n=S.filter(M=>M.kind==="videoinput")),t(2,s=S.filter(M=>M.kind==="audiooutput")),S}catch(S){console.log(S)}}catch(S){console.log(S)}});const h=()=>{c&&a&&o&&Te.update(S=>({microphoneId:c,videoId:a,speakerId:o}))};function i(){c=$e(this),t(3,c),t(0,l)}function m(){a=$e(this),t(4,a),t(1,n)}function f(){o=$e(this),t(5,o),t(2,s)}return[l,n,s,c,a,o,h,i,m,f]}class mt extends x{constructor(e){super(),ee(this,e,_t,dt,te,{})}}function Ge(r){let e,t,l,n;return{c(){e=b("video"),t=b("track"),this.h()},l(s){e=w(s,"VIDEO",{id:!0,class:!0});var c=g(e);t=w(c,"TRACK",{kind:!0}),c.forEach(u),this.h()},h(){d(t,"kind","captions"),e.autoplay=!0,d(e,"id",r[1]),d(e,"class","svelte-mv2wpo")},m(s,c){A(s,e,c),_(e,t),r[4](e),e.muted=r[2],l||(n=ne(e,"volumechange",r[5]),l=!0)},p(s,c){c&2&&d(e,"id",s[1]),c&4&&(e.muted=s[2])},d(s){s&&u(e),r[4](null),l=!1,n()}}}function vt(r){let e,t=r[0]&&Ge(r);return{c(){e=b("div"),t&&t.c(),this.h()},l(l){e=w(l,"DIV",{class:!0});var n=g(e);t&&t.l(n),n.forEach(u),this.h()},h(){d(e,"class","video-container svelte-mv2wpo")},m(l,n){A(l,e,n),t&&t.m(e,null)},p(l,[n]){l[0]?t?t.p(l,n):(t=Ge(l),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:$,o:$,d(l){l&&u(e),t&&t.d()}}}function gt(r,e,t){let{streamData:l}=e,{id:n}=e,s,c;Oe(()=>{n==="me"?t(2,s=!0):t(2,s=!1),t(3,c.srcObject=l,c),c.play()});function a(h){st[h?"unshift":"push"](()=>{c=h,t(3,c)})}function o(){s=this.muted,t(2,s)}return r.$$set=h=>{"streamData"in h&&t(0,l=h.streamData),"id"in h&&t(1,n=h.id)},[l,n,s,c,a,o]}class lt extends x{constructor(e){super(),ee(this,e,gt,vt,te,{streamData:0,id:1})}}function Ke(r,e,t){const l=r.slice();return l[15]=e[t],l}function Qe(r){let e,t,l;return t=new lt({props:{streamData:r[0],id:"me"}}),{c(){e=b("div"),K(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0,style:!0});var s=g(e);Q(t.$$.fragment,s),s.forEach(u),this.h()},h(){d(e,"class","webcam svelte-kj2w8f"),Ee(e,"width",r[4]+"px"),Ee(e,"height",r[5]+"px")},m(n,s){A(n,e,s),X(t,e,null),l=!0},p(n,s){const c={};s&1&&(c.streamData=n[0]),t.$set(c),(!l||s&16)&&Ee(e,"width",n[4]+"px"),(!l||s&32)&&Ee(e,"height",n[5]+"px")},i(n){l||(y(t.$$.fragment,n),l=!0)},o(n){V(t.$$.fragment,n),l=!1},d(n){n&&u(e),Y(t)}}}function Xe(r){let e,t,l,n;return t=new lt({props:{streamData:r[15].stream,id:r[15].id}}),{c(){e=b("div"),K(t.$$.fragment),l=N(),this.h()},l(s){e=w(s,"DIV",{class:!0,style:!0});var c=g(e);Q(t.$$.fragment,c),l=R(c),c.forEach(u),this.h()},h(){d(e,"class","webcam svelte-kj2w8f"),Ee(e,"width",r[4]+"px")},m(s,c){A(s,e,c),X(t,e,null),_(e,l),n=!0},p(s,c){const a={};c&2&&(a.streamData=s[15].stream),c&2&&(a.id=s[15].id),t.$set(a),(!n||c&16)&&Ee(e,"width",s[4]+"px")},i(s){n||(y(t.$$.fragment,s),n=!0)},o(s){V(t.$$.fragment,s),n=!1},d(s){s&&u(e),Y(t)}}}function pt(r){let e,t,l,n,s;ye(r[8]);let c=r[0]!==void 0&&Qe(r),a=r[1],o=[];for(let i=0;i<a.length;i+=1)o[i]=Xe(Ke(r,a,i));const h=i=>V(o[i],1,1,()=>{o[i]=null});return{c(){e=b("section"),c&&c.c(),t=N();for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=w(i,"SECTION",{class:!0});var m=g(e);c&&c.l(m),t=R(m);for(let f=0;f<o.length;f+=1)o[f].l(m);m.forEach(u),this.h()},h(){d(e,"class","dish svelte-kj2w8f")},m(i,m){A(i,e,m),c&&c.m(e,null),_(e,t);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);l=!0,n||(s=[ne(window,"resize",r[8]),ne(e,"mousemove",r[6])],n=!0)},p(i,[m]){if(i[0]!==void 0?c?(c.p(i,m),m&1&&y(c,1)):(c=Qe(i),c.c(),y(c,1),c.m(e,t)):c&&(fe(),V(c,1,1,()=>{c=null}),he()),m&18){a=i[1];let f;for(f=0;f<a.length;f+=1){const S=Ke(i,a,f);o[f]?(o[f].p(S,m),y(o[f],1)):(o[f]=Xe(S),o[f].c(),y(o[f],1),o[f].m(e,null))}for(fe(),f=a.length;f<o.length;f+=1)h(f);he()}},i(i){if(!l){y(c);for(let m=0;m<a.length;m+=1)y(o[m]);l=!0}},o(i){V(c),o=o.filter(Boolean);for(let m=0;m<o.length;m+=1)V(o[m]);l=!1},d(i){i&&u(e),c&&c.d(),Ie(o,i),n=!1,Me(s)}}}const Se=10;function bt(r,e,t){let{localStream:l}=e,{remoteStreams:n}=e,s,c,a,o={width:0,height:0},h,i,m;const f=9/16;function S(C){let H=0,q=0,O=C*f+Se*2;for(;H<h;)q+C>o.width&&(q=0,O=O+C*f+Se*2),q=q+C+Se*2,H++;return O>o.height||C>o.width?!1:C}function M(){let C=0,H=1;for(;H<5e3;){if(S(H)===!1){C=H-1;break}H++}return C=C-Se*2,C}const le=()=>{Ze.update(()=>!0),clearTimeout(s),s=setTimeout(function(){Ze.update(()=>!1)},4e3)};function j(){t(2,c=window.innerHeight),t(3,a=window.innerWidth)}return r.$$set=C=>{"localStream"in C&&t(0,l=C.localStream),"remoteStreams"in C&&t(1,n=C.remoteStreams)},r.$$.update=()=>{r.$$.dirty&158&&(h=n.length+1,t(7,o={width:Math.floor(a*.98),height:Math.floor(c*.87)}),o.width*o.height,t(4,i=M()),t(5,m=i*f))},[l,n,c,a,i,m,le,o,j]}class wt extends x{constructor(e){super(),ee(this,e,bt,pt,te,{localStream:0,remoteStreams:1})}}function Et(r){let e,t;return{c(){e=ie("svg"),t=ie("path"),this.h()},l(l){e=ue(l,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var n=g(e);t=ue(n,"path",{d:!0}),g(t).forEach(u),n.forEach(u),this.h()},h(){d(t,"d","M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8Zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022ZM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816ZM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","20"),d(e,"height","20"),d(e,"fill","currentColor"),d(e,"class","bi bi-people"),d(e,"viewBox","0 0 16 16")},m(l,n){A(l,e,n),_(e,t)},p:$,i:$,o:$,d(l){l&&u(e)}}}class kt extends x{constructor(e){super(),ee(this,e,null,Et,te,{})}}function It(r){let e,t;return{c(){e=ie("svg"),t=ie("path"),this.h()},l(l){e=ue(l,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var n=g(e);t=ue(n,"path",{d:!0}),g(t).forEach(u),n.forEach(u),this.h()},h(){d(t,"d","M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","20"),d(e,"height","20"),d(e,"fill","currentColor"),d(e,"class","bi bi-people-fill"),d(e,"viewBox","0 0 16 16")},m(l,n){A(l,e,n),_(e,t)},p:$,i:$,o:$,d(l){l&&u(e)}}}class St extends x{constructor(e){super(),ee(this,e,null,It,te,{})}}function yt(r){let e,t;return{c(){e=ie("svg"),t=ie("path"),this.h()},l(l){e=ue(l,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var n=g(e);t=ue(n,"path",{d:!0}),g(t).forEach(u),n.forEach(u),this.h()},h(){d(t,"d","M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","20"),d(e,"height","20"),d(e,"fill","currentColor"),d(e,"class","bi bi-share"),d(e,"viewBox","0 0 16 16")},m(l,n){A(l,e,n),_(e,t)},p:$,i:$,o:$,d(l){l&&u(e)}}}class Dt extends x{constructor(e){super(),ee(this,e,null,yt,te,{})}}function Ct(r){let e,t;return{c(){e=ie("svg"),t=ie("path"),this.h()},l(l){e=ue(l,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var n=g(e);t=ue(n,"path",{d:!0}),g(t).forEach(u),n.forEach(u),this.h()},h(){d(t,"d","M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","20"),d(e,"height","20"),d(e,"fill","currentColor"),d(e,"class","bi bi-share-fill"),d(e,"viewBox","0 0 16 16")},m(l,n){A(l,e,n),_(e,t)},p:$,i:$,o:$,d(l){l&&u(e)}}}class $t extends x{constructor(e){super(),ee(this,e,null,Ct,te,{})}}function Ye(r,e,t){const l=r.slice();return l[1]=e[t],l}function xe(r){let e,t,l=r[1].User+"",n,s,c=r[1].Socket+"",a,o,h;return{c(){e=b("li"),t=b("p"),n=B(l),s=B(" ("),a=B(c),o=B(")"),h=N(),this.h()},l(i){e=w(i,"LI",{});var m=g(e);t=w(m,"P",{class:!0});var f=g(t);n=z(f,l),s=z(f," ("),a=z(f,c),o=z(f,")"),f.forEach(u),h=R(m),m.forEach(u),this.h()},h(){d(t,"class","svelte-13vqtjh")},m(i,m){A(i,e,m),_(e,t),_(t,n),_(t,s),_(t,a),_(t,o),_(e,h)},p(i,m){m&1&&l!==(l=i[1].User+"")&&ke(n,l),m&1&&c!==(c=i[1].Socket+"")&&ke(a,c)},d(i){i&&u(e)}}}function Tt(r){let e,t,l,n,s,c=r[0],a=[];for(let o=0;o<c.length;o+=1)a[o]=xe(Ye(r,c,o));return{c(){e=b("section"),t=b("h4"),l=B("Users connected"),n=N(),s=b("ul");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=w(o,"SECTION",{class:!0});var h=g(e);t=w(h,"H4",{});var i=g(t);l=z(i,"Users connected"),i.forEach(u),n=R(h),s=w(h,"UL",{});var m=g(s);for(let f=0;f<a.length;f+=1)a[f].l(m);m.forEach(u),h.forEach(u),this.h()},h(){d(e,"class","conn-users svelte-13vqtjh")},m(o,h){A(o,e,h),_(e,t),_(t,l),_(e,n),_(e,s);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(s,null)},p(o,[h]){if(h&1){c=o[0];let i;for(i=0;i<c.length;i+=1){const m=Ye(o,c,i);a[i]?a[i].p(m,h):(a[i]=xe(m),a[i].c(),a[i].m(s,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=c.length}},i:$,o:$,d(o){o&&u(e),Ie(a,o)}}}function Mt(r,e,t){let{usersConnected:l}=e;return r.$$set=n=>{"usersConnected"in n&&t(0,l=n.usersConnected)},[l]}class Ot extends x{constructor(e){super(),ee(this,e,Mt,Tt,te,{usersConnected:0})}}function Vt(r){let e,t,l,n,s,c,a,o;return{c(){e=b("div"),t=b("p"),l=B(r[0]),n=N(),s=b("button"),c=B("Copy"),this.h()},l(h){e=w(h,"DIV",{class:!0});var i=g(e);t=w(i,"P",{class:!0});var m=g(t);l=z(m,r[0]),m.forEach(u),n=R(i),s=w(i,"BUTTON",{class:!0});var f=g(s);c=z(f,"Copy"),f.forEach(u),i.forEach(u),this.h()},h(){d(t,"class","svelte-11zk24q"),d(s,"class","svelte-11zk24q"),d(e,"class","room-card svelte-11zk24q")},m(h,i){A(h,e,i),_(e,t),_(t,l),_(e,n),_(e,s),_(s,c),a||(o=ne(s,"click",r[1]),a=!0)},p(h,[i]){i&1&&ke(l,h[0])},i:$,o:$,d(h){h&&u(e),a=!1,o()}}}function At(r,e,t){let{RoomID:l}=e;const n=()=>navigator.clipboard.writeText(l);return r.$$set=s=>{"RoomID"in s&&t(0,l=s.RoomID)},[l,n]}class Nt extends x{constructor(e){super(),ee(this,e,At,Vt,te,{RoomID:0})}}function Rt(r){let e,t;return e=new $t({}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function Ut(r){let e,t;return e=new Dt({}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function jt(r){let e,t;return e=new St({}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function Bt(r){let e,t;return e=new kt({}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function et(r){let e,t;return e=new Ot({props:{usersConnected:r[1]}}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},p(l,n){const s={};n&2&&(s.usersConnected=l[1]),e.$set(s)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function tt(r){let e,t;return e=new Nt({props:{RoomID:r[0]}}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},p(l,n){const s={};n&1&&(s.RoomID=l[0]),e.$set(s)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function zt(r){let e,t,l,n,s,c,a,o,h,i,m,f,S,M,le,j,C,H;const q=[Ut,Rt],O=[];function ce(I,k){return I[5]?1:0}a=ce(r),o=O[a]=q[a](r);const oe=[Bt,jt],W=[];function J(I,k){return I[4]?1:0}m=J(r),f=W[m]=oe[m](r);let D=r[3]===2&&et(r),p=r[3]===1&&tt(r);return{c(){e=b("section"),t=b("section"),l=b("button"),n=B("Leave"),s=N(),c=b("button"),o.c(),h=N(),i=b("button"),f.c(),S=N(),M=b("section"),D&&D.c(),le=N(),p&&p.c(),this.h()},l(I){e=w(I,"SECTION",{class:!0});var k=g(e);t=w(k,"SECTION",{class:!0});var T=g(t);l=w(T,"BUTTON",{class:!0});var U=g(l);n=z(U,"Leave"),U.forEach(u),T.forEach(u),s=R(k),c=w(k,"BUTTON",{class:!0});var de=g(c);o.l(de),de.forEach(u),h=R(k),i=w(k,"BUTTON",{class:!0});var ae=g(i);f.l(ae),ae.forEach(u),k.forEach(u),S=R(I),M=w(I,"SECTION",{class:!0});var se=g(M);D&&D.l(se),le=R(se),p&&p.l(se),se.forEach(u),this.h()},h(){d(l,"class","svelte-10s6j8w"),d(t,"class","leave-control svelte-10s6j8w"),d(c,"class","show svelte-10s6j8w"),d(i,"class","show svelte-10s6j8w"),d(e,"class","accesibility svelte-10s6j8w"),d(M,"class","cards svelte-10s6j8w")},m(I,k){A(I,e,k),_(e,t),_(t,l),_(l,n),_(e,s),_(e,c),O[a].m(c,null),_(e,h),_(e,i),W[m].m(i,null),A(I,S,k),A(I,M,k),D&&D.m(M,null),_(M,le),p&&p.m(M,null),j=!0,C||(H=[ne(l,"click",function(){rt(r[2])&&r[2].apply(this,arguments)}),ne(c,"click",r[7]),ne(i,"click",r[8])],C=!0)},p(I,[k]){r=I;let T=a;a=ce(r),a!==T&&(fe(),V(O[T],1,1,()=>{O[T]=null}),he(),o=O[a],o||(o=O[a]=q[a](r),o.c()),y(o,1),o.m(c,null));let U=m;m=J(r),m!==U&&(fe(),V(W[U],1,1,()=>{W[U]=null}),he(),f=W[m],f||(f=W[m]=oe[m](r),f.c()),y(f,1),f.m(i,null)),r[3]===2?D?(D.p(r,k),k&8&&y(D,1)):(D=et(r),D.c(),y(D,1),D.m(M,le)):D&&(fe(),V(D,1,1,()=>{D=null}),he()),r[3]===1?p?(p.p(r,k),k&8&&y(p,1)):(p=tt(r),p.c(),y(p,1),p.m(M,null)):p&&(fe(),V(p,1,1,()=>{p=null}),he())},i(I){j||(y(o),y(f),y(D),y(p),j=!0)},o(I){V(o),V(f),V(D),V(p),j=!1},d(I){I&&u(e),O[a].d(),W[m].d(),I&&u(S),I&&u(M),D&&D.d(),p&&p.d(),C=!1,Me(H)}}}function Ht(r,e,t){let{roomID:l}=e,{usersConnected:n}=e,{leaveFunc:s}=e,c=0,a=!1,o=!1;const h=f=>{let S=0;return f===1?(o?S=0:S=1,t(5,o=!o),t(4,a=!1)):f===2&&(a?S=0:S=2,t(4,a=!a),t(5,o=!1)),S},i=()=>t(3,c=h(1)),m=()=>t(3,c=h(2));return r.$$set=f=>{"roomID"in f&&t(0,l=f.roomID),"usersConnected"in f&&t(1,n=f.usersConnected),"leaveFunc"in f&&t(2,s=f.leaveFunc)},[l,n,s,c,a,o,h,i,m]}class Zt extends x{constructor(e){super(),ee(this,e,Ht,zt,te,{roomID:0,usersConnected:1,leaveFunc:2})}}function Pt(r){let e,t,l,n,s,c;return t=new Zt({props:{roomID:r[0].roomId,usersConnected:r[2],leaveFunc:r[7]}}),s=new wt({props:{localStream:r[3],remoteStreams:r[4]}}),{c(){e=b("header"),K(t.$$.fragment),l=N(),n=b("main"),K(s.$$.fragment),this.h()},l(a){e=w(a,"HEADER",{class:!0});var o=g(e);Q(t.$$.fragment,o),o.forEach(u),l=R(a),n=w(a,"MAIN",{class:!0});var h=g(n);Q(s.$$.fragment,h),h.forEach(u),this.h()},h(){d(e,"class","svelte-1uocphl"),d(n,"class","svelte-1uocphl")},m(a,o){A(a,e,o),X(t,e,null),A(a,l,o),A(a,n,o),X(s,n,null),c=!0},p(a,o){const h={};o&1&&(h.roomID=a[0].roomId),o&4&&(h.usersConnected=a[2]),t.$set(h);const i={};o&8&&(i.localStream=a[3]),o&16&&(i.remoteStreams=a[4]),s.$set(i)},i(a){c||(y(t.$$.fragment,a),y(s.$$.fragment,a),c=!0)},o(a){V(t.$$.fragment,a),V(s.$$.fragment,a),c=!1},d(a){a&&u(e),Y(t),a&&u(l),a&&u(n),Y(s)}}}function Lt(r){let e,t;return e=new mt({}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},p:$,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function Ft(r){let e,t;return e=new ut({}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},p:$,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function Jt(r){let e,t;return e=new ht({}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},p:$,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function qt(r){let e,t,l,n;const s=[Jt,Ft,Lt,Pt],c=[];function a(o,h){return o[5]?0:o[1]?1:o[6]?2:3}return t=a(r),l=c[t]=s[t](r),{c(){e=b("div"),l.c(),this.h()},l(o){e=w(o,"DIV",{class:!0});var h=g(e);l.l(h),h.forEach(u),this.h()},h(){d(e,"class","Page svelte-1uocphl")},m(o,h){A(o,e,h),c[t].m(e,null),n=!0},p(o,[h]){let i=t;t=a(o),t===i?c[t].p(o,h):(fe(),V(c[i],1,1,()=>{c[i]=null}),he(),l=c[t],l?l.p(o,h):(l=c[t]=s[t](o),l.c()),y(l,1),l.m(e,null))},i(o){n||(y(l),n=!0)},o(o){V(l),n=!1},d(o){o&&u(e),c[t].d()}}}function Wt(r,e,t){let{data:l}=e,n=[],s,c,a,o=[],h=[],i=!1,m=!1,f=!0,S;const M={iceServers:[{urls:"stun:stun.services.mozilla.com"},{urls:"stun:stun.l.google.com:19302"}]},le=ot.subscribe(p=>{t(8,s=p)}),j=Te.subscribe(p=>{t(9,S=p)}),C=()=>{s.emit("room:leave",l.roomId),ct("/"),Te.update(()=>({microphoneId:"",videoId:"",speakerId:""}))},H=p=>{t(4,h=h.filter(I=>I.id!==p))},q=p=>{t(2,n=p)},O=async()=>{const p={video:{deviceId:{exact:S.videoId}},audio:{deviceId:{exact:S.microphoneId}}};try{if(navigator.mediaDevices.getUserMedia)try{const I=await navigator.mediaDevices.getUserMedia(p);return t(3,a=I),I}catch(I){console.log(I)}}catch(I){console.log(I)}},ce=(p,I)=>{const k=JSON.parse(I);p!==c&&(k.sdp&&o[p].setRemoteDescription(new RTCSessionDescription(k.sdp)).then(function(){k.sdp.type=="offer"&&o[p].createAnswer().then(function(T){o[p].setLocalDescription(T).then(function(){s.emit("signal",p,JSON.stringify({sdp:o[p].localDescription}))}).catch(U=>console.log(U))}).catch(T=>console.log(T))}).catch(T=>console.log(T)),k.ice&&o[p].addIceCandidate(new RTCIceCandidate(k.ice)).catch(T=>console.log(T)))},oe=(p,I)=>{t(4,h=[...h,{id:I,stream:p.stream}])},W=(p,I,k)=>{k.forEach(function(T){o[T]||(o[T]=new RTCPeerConnection(M),o[T].addStream(a),o[T].onicecandidate=function(U){U.candidate!=null&&(console.log("SENDING ICE"),s.emit("signal",T,JSON.stringify({ice:U.candidate})))},o[T].onaddstream=function(U){oe(U,T)})}),I>=2&&o[p].createOffer().then(function(T){o[p].setLocalDescription(T).then(function(){s.emit("signal",p,JSON.stringify({sdp:o[p].localDescription}))}).catch(U=>console.log(U))})},J=()=>{t(1,i=!0)},D=()=>{t(5,m=!0)};return c=s.id,Oe(async()=>{s.emit("users:request",l.roomId),s.on("join:incorrect",J),s.on("room:incorrect",D),s.on("users:response",q)}),nt(()=>{le(),j(),s.off("join:incorrect",J),s.off("room:incorrect",D),s.off("users:response",q),s.off("signal",ce),s.off("user:connected",W),s.off("user:left",H)}),r.$$set=p=>{"data"in p&&t(0,l=p.data)},r.$$.update=()=>{r.$$.dirty&771&&(i||S.microphoneId!==""&&S.videoId!==""&&S.speakerId!==""&&(t(6,f=!1),O().then(p=>{}).then(()=>{s.on("user:connected",W),s.on("signal",ce),s.on("user:left",H),s.emit("page:ready",l.roomId)})))},[l,i,n,a,h,m,f,C,s,S]}class Xt extends x{constructor(e){super(),ee(this,e,Wt,qt,te,{data:0})}}export{Xt as component,Qt as universal};
